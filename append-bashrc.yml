---
- name: Add customized bash prompt
  hosts: localhost
  connection: local
  become: false
  tasks:
    - name: Append bash prompt block to user .bashrc
      blockinfile:
        marker: '# {mark} bash prompt managed by Ansible #'
        path: /home/{{ user }}/.bashrc
        block: "{{ lookup('ansible.builtin.file', 'files/bash.sh') }}"
      when: user is defined

